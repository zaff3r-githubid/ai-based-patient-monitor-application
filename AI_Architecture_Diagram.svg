<?xml version="1.0" encoding="UTF-8"?>
<svg width="1200" height="800" xmlns="http://www.w3.org/2000/svg">
  <!-- Title -->
  <text x="600" y="40" font-family="Arial, sans-serif" font-size="32" font-weight="bold" 
        text-anchor="middle" fill="#1E2761">
    AI-Based Patient Monitor - System Architecture
  </text>
  
  <!-- Layer 1: User Interface -->
  <rect x="100" y="80" width="1000" height="80" rx="10" fill="#1E2761" stroke="#1E2761" stroke-width="2"/>
  <text x="600" y="110" font-family="Arial" font-size="18" font-weight="bold" 
        text-anchor="middle" fill="white">User Interface Layer</text>
  <text x="600" y="135" font-family="Arial" font-size="14" 
        text-anchor="middle" fill="#CADCFC">Streamlit Web Application</text>
  
  <!-- Layer 2: Application Layer -->
  <rect x="100" y="200" width="480" height="120" rx="10" fill="#CADCFC" stroke="#CADCFC" stroke-width="2"/>
  <text x="340" y="230" font-family="Arial" font-size="16" font-weight="bold" 
        text-anchor="middle" fill="#1E2761">Data Processing</text>
  <text x="340" y="255" font-family="Arial" font-size="13" 
        text-anchor="middle" fill="#1E2761">• CSV Parser (Pandas)</text>
  <text x="340" y="275" font-family="Arial" font-size="13" 
        text-anchor="middle" fill="#1E2761">• Data Validation</text>
  <text x="340" y="295" font-family="Arial" font-size="13" 
        text-anchor="middle" fill="#1E2761">• Vitals Calculation</text>
  
  <rect x="620" y="200" width="480" height="120" rx="10" fill="#CADCFC" stroke="#CADCFC" stroke-width="2"/>
  <text x="860" y="230" font-family="Arial" font-size="16" font-weight="bold" 
        text-anchor="middle" fill="#1E2761">Clinical Engine</text>
  <text x="860" y="255" font-family="Arial" font-size="13" 
        text-anchor="middle" fill="#1E2761">• Rule-based Detection</text>
  <text x="860" y="275" font-family="Arial" font-size="13" 
        text-anchor="middle" fill="#1E2761">• Severity Classification</text>
  <text x="860" y="295" font-family="Arial" font-size="13" 
        text-anchor="middle" fill="#1E2761">• Condition Identification</text>
  
  <!-- Layer 3: AI/RAG Layer -->
  <rect x="100" y="360" width="1000" height="120" rx="10" fill="#84B59F" stroke="#84B59F" stroke-width="2"/>
  <text x="600" y="390" font-family="Arial" font-size="18" font-weight="bold" 
        text-anchor="middle" fill="white">AI / RAG Layer</text>
  <text x="300" y="420" font-family="Arial" font-size="14" 
        text-anchor="middle" fill="white">Context Builder</text>
  <text x="300" y="440" font-family="Arial" font-size="12" 
        text-anchor="middle" fill="white">Extract vitals • Format CSV</text>
  
  <text x="600" y="420" font-family="Arial" font-size="14" 
        text-anchor="middle" fill="white">OpenAI API</text>
  <text x="600" y="440" font-family="Arial" font-size="12" 
        text-anchor="middle" fill="white">GPT-4o-mini</text>
  
  <text x="900" y="420" font-family="Arial" font-size="14" 
        text-anchor="middle" fill="white">Response Processor</text>
  <text x="900" y="440" font-family="Arial" font-size="12" 
        text-anchor="middle" fill="white">Parse actions • Cache</text>
  
  <!-- Layer 4: Observability -->
  <rect x="100" y="520" width="1000" height="80" rx="10" fill="#F96167" stroke="#F96167" stroke-width="2"/>
  <text x="600" y="550" font-family="Arial" font-size="18" font-weight="bold" 
        text-anchor="middle" fill="white">Observability Layer</text>
  <text x="600" y="575" font-family="Arial" font-size="14" 
        text-anchor="middle" fill="white">Token Tracking • Latency Monitoring • Error Handling • Success Metrics</text>
  
  <!-- Arrows -->
  <!-- UI to Data Processing -->
  <line x1="340" y1="160" x2="340" y2="200" stroke="#1E2761" stroke-width="3" marker-end="url(#arrowhead)"/>
  
  <!-- UI to Clinical Engine -->
  <line x1="860" y1="160" x2="860" y2="200" stroke="#1E2761" stroke-width="3" marker-end="url(#arrowhead)"/>
  
  <!-- Data/Clinical to AI -->
  <line x1="340" y1="320" x2="340" y2="360" stroke="#84B59F" stroke-width="3" marker-end="url(#arrowhead)"/>
  <line x1="860" y1="320" x2="860" y2="360" stroke="#84B59F" stroke-width="3" marker-end="url(#arrowhead)"/>
  
  <!-- AI to Observability -->
  <line x1="600" y1="480" x2="600" y2="520" stroke="#F96167" stroke-width="3" marker-end="url(#arrowhead)"/>
  
  <!-- Data flow labels -->
  <text x="250" y="185" font-family="Arial" font-size="11" fill="#1E2761">CSV Upload</text>
  <text x="750" y="185" font-family="Arial" font-size="11" fill="#1E2761">User Input</text>
  <text x="250" y="345" font-family="Arial" font-size="11" fill="#84B59F">Patient Data</text>
  <text x="750" y="345" font-family="Arial" font-size="11" fill="#84B59F">Diagnosis</text>
  <text x="510" y="505" font-family="Arial" font-size="11" fill="#F96167">AI Response</text>
  
  <!-- Legend -->
  <rect x="100" y="650" width="200" height="120" rx="5" fill="none" stroke="#ccc" stroke-width="1"/>
  <text x="200" y="675" font-family="Arial" font-size="14" font-weight="bold" 
        text-anchor="middle" fill="#1E2761">Color Legend</text>
  <rect x="120" y="690" width="30" height="15" fill="#1E2761"/>
  <text x="160" y="702" font-family="Arial" font-size="12" fill="#333">User Interface</text>
  <rect x="120" y="710" width="30" height="15" fill="#CADCFC"/>
  <text x="160" y="722" font-family="Arial" font-size="12" fill="#333">Application</text>
  <rect x="120" y="730" width="30" height="15" fill="#84B59F"/>
  <text x="160" y="742" font-family="Arial" font-size="12" fill="#333">AI/RAG</text>
  <rect x="120" y="750" width="30" height="15" fill="#F96167"/>
  <text x="160" y="762" font-family="Arial" font-size="12" fill="#333">Observability</text>
  
  <!-- Technology Stack -->
  <rect x="900" y="650" width="200" height="120" rx="5" fill="none" stroke="#ccc" stroke-width="1"/>
  <text x="1000" y="675" font-family="Arial" font-size="14" font-weight="bold" 
        text-anchor="middle" fill="#1E2761">Tech Stack</text>
  <text x="920" y="695" font-family="Arial" font-size="11" fill="#333">• Streamlit 1.31+</text>
  <text x="920" y="715" font-family="Arial" font-size="11" fill="#333">• Pandas 2.1+</text>
  <text x="920" y="735" font-family="Arial" font-size="11" fill="#333">• OpenAI API</text>
  <text x="920" y="755" font-family="Arial" font-size="11" fill="#333">• Python 3.11+</text>
  
  <!-- Arrow marker definition -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#1E2761" />
    </marker>
  </defs>
</svg>